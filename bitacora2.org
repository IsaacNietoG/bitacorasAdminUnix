#+TITLE: Bitácora Semanal 2: Administración de Sistemas Unix
#+AUTHOR: Equipo Alpine White
#+DATE: [2026-02-09 lun]
#+OPTIONS: toc:2
#+PROPERTY: header-args :exports both
#+LATEX_CLASS: article
#+LATEX_CLASS_OPTIONS: [11pt, letterpaper]
#+LATEX_HEADER: \usepackage[margin=2.5cm]{geometry}      % Márgenes decentes
#+LATEX_HEADER: \usepackage[utf8]{inputenc}
#+LATEX_HEADER: \usepackage{palatino}                   % Tipografía elegante
#+LATEX_HEADER: \usepackage{xcolor}                     % Colores personalizados

* Información General
- *Semana:* Del 9 de Febrero 2026 al 13 de Febrero 2026
- *Equipo:*
  - Arreguín Salgado Gael Emiliano
  - Gramer Muñoz Omar Fernando
  - López Pérez Mariana
  - Nieto Gallegos Isaac Julián

Durante la semana vimos una variedad de comandos que nos permiten ver el potencial de configurabilidad que existe dentro de Linux. Particularmente, estuvimos trabajando en permisos de archivos, montaje de sistemas de archivos y vamos comenzando a prepararnos para la virtualización.

* Comandos de Administración en Linux

Definiciones de Comandos de Administración en Linux

| Comando | Definición |
|---------+------------|
| dmesg \| less | Muestra el registro del kernel (mensajes del sistema), incluyendo detección de hardware, particiones, errores de disco y eventos al arrancar. El uso de `less` permite navegar el historial página por página. |
| fdisk -l /dev/sdf | Lista la tabla de particiones del disco especificado. Muestra tamaño, tipo (EFI, Linux, HPFS/NTFS), sectores y UUID. Es útil para identificar cómo está organizada la memoria o el disco. |
| p (en fdisk) | Dentro del intérprete interactivo de fdisk, el comando `p` imprime (print) la tabla actual de particiones. |
| n (en fdisk) | Crea una nueva partición dentro del disco seleccionado. Permite elegir tipo (primaria, extendida) y tamaño. |
| gpart | Herramienta para analizar y recuperar tablas de particiones dañadas. Puede reconstruir estructuras perdidas en discos. |
| smart | Hace referencia a SMART (Self-Monitoring, Analysis and Reporting Technology), sistema que monitorea el estado físico del disco para detectar fallos. Normalmente se usa con `smartctl`. |
| efibootmgr | Administra las entradas de arranque EFI. Permite ver, crear o modificar el orden de arranque almacenado en la memoria NVRAM del sistema. |
| df -l | Muestra los sistemas de archivos montados excluyendo los remotos. Indica cuánto espacio está usado y disponible. |
| df -lh | Igual que `df`, pero en formato legible (human readable), mostrando tamaños en KB, MB o GB. |
| mount /dev/sda3 /mnt | Monta una partición en un directorio para poder acceder a su contenido. Integra el sistema de archivos al árbol principal. |
| umount /mnt | Desmonta una partición previamente montada, liberando el punto de montaje. |
| mount -o subvol=home /dev/sda3 /mnt | Monta un subvolumen específico en sistemas Btrfs. Permite separar /home de la raíz del sistema. |
| mount --bind /dev /mnt/dev | Realiza un montaje enlazado (bind mount), permitiendo que un directorio aparezca en otra ubicación. Es común antes de usar `chroot`. |
| mount --bind /sys /mnt/sys | Similar al anterior, enlaza el directorio del sistema para que esté disponible dentro de un entorno chroot. |
| less /etc/fstab | Muestra el archivo de configuración donde se definen los sistemas de archivos que se montan automáticamente al iniciar el sistema. |
| less /etc/mtab | Muestra los sistemas de archivos actualmente montados. |
| cat /etc/os-release | Muestra información sobre la distribución del sistema operativo (nombre, versión, ID). |
| chroot /mnt bash | Cambia la raíz del sistema al directorio indicado y ejecuta un shell (bash). Permite administrar o reparar un sistema desde otro entorno. |

* Montaje de Particiones, EFI y Administración del Sistema

------------------------------------------------------------
* 1. Identificación y Montaje de Particiones

En clase analizamos cómo identificar las particiones del sistema y montarlas
manualmente utilizando el directorio /mnt como punto temporal de montaje.

El directorio /mnt está definido por el FHS (Filesystem Hierarchy Standard)
como un punto destinado a montajes temporales realizados por el administrador.

El proceso general consistió en:

- Identificar las particiones con herramientas como fdisk o lsblk.
- Reconocer la partición raíz (/), la partición /boot y la partición /boot/efi.
- Montar manualmente las particiones para inspeccionar su contenido.
- Analizar la estructura interna del sistema de archivos.

------------------------------------------------------------
* 2. EFI (EFI System Partition)

La EFI System Partition (ESP) es una partición especial utilizada en sistemas
modernos que emplean UEFI (Unified Extensible Firmware Interface) en lugar del
BIOS tradicional.

** Características principales:
- Formateada generalmente en FAT32.
- Contiene los cargadores de arranque (.efi).
- Se monta comúnmente en /boot/efi.
- Es requerida en sistemas con tabla de particiones GPT.

** Proceso de arranque en sistemas UEFI:
1. Encendido del equipo.
2. Ejecución del firmware (UEFI).
3. Localización de la partición EFI.
4. Carga del bootloader (ej. GRUB).
5. Selección y carga del kernel.
6. Inicio del sistema operativo.

La EFI permite mayor flexibilidad, soporte para discos mayores a 2TB y
mecanismos como Secure Boot.

------------------------------------------------------------
* 3. Dispositivos tipo /dev/sdX y contexto de "sd3"

En Linux, los dispositivos de almacenamiento se representan como block devices dentro del directorio /dev.

Ejemplos:
- /dev/sda  → Primer disco detectado
- /dev/sdb  → Segundo disco
- /dev/sda1 → Primera partición del disco sda
- /dev/sda3 → Tercera partición del disco sda

Cuando se mencionó “sd3”, se hacía referencia probablemente a /dev/sda3, que corresponde a una partición específica del disco principal. Esta partición
puede contener:

- La raíz del sistema (/)
- Un subvolumen en Btrfs
- El directorio /home
- Otro sistema de archivos independiente

En sistemas modernos es común que la raíz esté en /dev/sda3 utilizando Btrfs. Ya que las primeras dos particiones suelen justamente dedicarse al arranque, o a otro sistema.

------------------------------------------------------------
* 4. Buenas prácticas: uso de usuario con privilegios sudo

Una recomendación importante fue evitar trabajar directamente como root.

** Justificación técnica:

En sistemas Unix existe separación de privilegios:

- Usuario normal → permisos limitados.
- Root (UID 0) → control total del sistema.

Trabajar siempre como root implica riesgos:
- Eliminación accidental de archivos críticos.
- Modificación indebida de configuraciones.
- Mayor impacto ante errores humanos.

** Buena práctica recomendada:
- Crear un usuario administrador.
- Asignarlo al grupo sudo o wheel.
- Elevar privilegios únicamente cuando sea necesario usando sudo.

Esto sigue el principio de:
#+BEGIN_QUOTE
Principio de mínimo privilegio (Principle of Least Privilege)
#+END_QUOTE

Este principio es ampliamente recomendado en comunidades técnicas,
documentación oficial y foros especializados en administración Linux.

------------------------------------------------------------
* 5. Sistema de archivos Btrfs

Se revisó el uso del sistema de archivos Btrfs, el cual es moderno y avanzado,
diseñado para ofrecer:

- Copy-on-Write (CoW)
- Snapshots
- Subvolúmenes
- Compresión
- Integridad de datos

------------------------------------------------------------
* 5.1 Opción compress=zstd:1 0 0

La opción:

compress=zstd:1

es una opción de montaje en Btrfs que habilita compresión usando Zstandard.

** Componentes:
- compress → activa compresión.
- zstd → algoritmo Zstandard.
- :1 → nivel de compresión (1 = bajo, más rápido).

Ventajas:
- Reduce uso de espacio en disco.
- Mejora rendimiento en ciertos escenarios (menos I/O).
- Transparente para el usuario.

En /etc/fstab suele verse algo como:

UUID=xxxxx  /  btrfs  defaults,compress=zstd:1  0  0

Los últimos dos valores (0 0) indican:
- Dump (respaldo) → generalmente 0.
- Orden de chequeo con fsck → generalmente 0 en Btrfs.

------------------------------------------------------------
* 5.2 Subvolúmenes (subvol)

Un subvolumen en Btrfs es una división lógica dentro del mismo sistema de
archivos.

No es una partición física, sino una estructura interna.

Ejemplo común:

- Subvolumen @        → raíz del sistema
- Subvolumen @home    → directorio /home

Ventajas:
- Permite snapshots independientes.
- Separación lógica sin particionar físicamente.
- Facilita recuperación y administración.

Montaje ejemplo:

mount -o subvol=@home /dev/sda3 /mnt

------------------------------------------------------------
* 6. Archivo /etc/fstab

El archivo /etc/fstab define qué sistemas de archivos se montan al inicio.

Incluye:
- UUID
- Punto de montaje
- Tipo de sistema de archivos
- Opciones de montaje
- Flags de dump y fsck

Es clave en administración Unix para garantizar persistencia de configuración.

------------------------------------------------------------
* 7. Conceptos Complementarios Propuestos

A continuación se listan temas estructurales para desarrollo posterior
dentro de la materia Administración de Unix.

Esta semana permitió comprender cómo Unix/Linux organiza el almacenamiento
desde el nivel físico hasta el nivel lógico, cómo se monta el sistema de
archivos y cómo el proceso de arranque interactúa con la EFI y el bootloader.

Asimismo, se reforzaron buenas prácticas administrativas como el uso de
usuarios con privilegios controlados y la comprensión del sistema de archivos
Btrfs y sus capacidades avanzadas.

Estos conocimientos constituyen una base esencial para la administración
segura y eficiente de sistemas Unix.
